<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>dynamicSDM: dynamic distribution projections • dynamicSDM</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="dynamicSDM: dynamic distribution projections">
<meta property="og:description" content="dynamicSDM">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">
    

    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynamicSDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vig0.html">vig0</a>
    </li>
    <li>
      <a href="../articles/vignette1_response_data.html">dynamicSDM: Response variable data</a>
    </li>
    <li>
      <a href="../articles/vignette2_explanatory_data.html">dynamicSDM: Explanatory variable data</a>
    </li>
    <li>
      <a href="../articles/vignette3_modelling.html">dynamicSDM: model fitting and autocorrelation</a>
    </li>
    <li>
      <a href="../articles/vignette4_projecting.html">dynamicSDM: dynamic distribution projections</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>dynamicSDM: dynamic distribution projections</h1>
            
      
      
      <div class="hidden name"><code>vignette4_projecting.Rmd</code></div>

    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va">dynamicSDM</span><span class="op">)</span></span></code></pre></div>
<div class="section level2">
<h2 id="stage-4-dynamic-projections-of-species-distribution">Stage 4: Dynamic projections of species distribution<a class="anchor" aria-label="anchor" href="#stage-4-dynamic-projections-of-species-distribution"></a>
</h2>
<p>In this tutorial, we will learn about functions within the <em>dynamicSDM</em> package for projecting intra- and inter- annual geographical distributions and abundances at high spatiotemporal resolution. This will involve extracting rasters for each explanatory variable across southern Africa at various intervals. Then we can project our dynamic SDMs onto these data to visualise species distribution patterns through space and time.</p>
<p>The <em>dynamicSDM</em> functions for extracting dynamic rasters require Google Earth Engine and Google Drive to be initialised. Fill in the code below with your Google account email, and run the code to check that <em>rgee</em> and <em>googledrive</em> have been correctly installed and authorised.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://github.com/r-spatial/rgee/" class="external-link">rgee</a></span><span class="op">)</span></span>
<span><span class="fu">rgee</span><span class="fu">::</span><span class="fu"><a href="https://r-spatial.github.io/rgee/reference/ee_check-tools.html" class="external-link">ee_check</a></span><span class="op">(</span><span class="op">)</span></span>
<span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://googledrive.tidyverse.org" class="external-link">googledrive</a></span><span class="op">)</span></span>
<span><span class="fu">googledrive</span><span class="fu">::</span><span class="fu"><a href="https://googledrive.tidyverse.org/reference/drive_user.html" class="external-link">drive_user</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#user.email&lt;-"your_google_email_here"</span></span>
<span><span class="co">#save.drive.folder&lt;-"your_google_folder_here"</span></span></code></pre></div>
<p>Note: You will need internet connection for this tutorial. Raster extraction may take some time depending on your internet connection strength.</p>
</div>
<div class="section level2">
<h2 id="directory-organisation">Directory organisation<a class="anchor" aria-label="anchor" href="#directory-organisation"></a>
</h2>
<p>We will be extracting rasters, generating projection covariate data frames, exporting projection rasters and saving GIFs. Let’s first make separate folders in our project directory to save this various outputs too. This is especially important as this suite of <em>dynamicSDM</em> functions rely on unique naming of files in the local directory or drive folder.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">variablenames</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"eight_sum_prec"</span>, <span class="st">"year_sum_prec"</span>, <span class="st">"grass_crop_percentage"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">project_directory</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>, <span class="st">"dynamicSDM_vignette"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co"># project_directory&lt;-"your_path_here"</span></span>
<span></span>
<span><span class="va">projection_directories</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">project_directory</span>, <span class="st">"projection"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">projection_directories</span>,recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">projectionrasters</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">projection_directories</span>, <span class="st">"projectionrasters"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">projectionrasters</span>,recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">projection_covariates</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">projection_directories</span>, <span class="st">"projectioncovariates"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">projection_covariates</span>,recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span>
<span></span>
<span><span class="va">projection_GIF</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">projection_directories</span>,<span class="st">"projection_GIF"</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/files2.html" class="external-link">dir.create</a></span><span class="op">(</span><span class="va">projection_GIF</span>,recursive <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code></pre></div>
<div class="section level3">
<h3 id="a-generate-projection-dates">a) Generate projection dates<a class="anchor" aria-label="anchor" href="#a-generate-projection-dates"></a>
</h3>
<p>dynamic_proj_dates() generates all dates in a given period at the interval type and size specified. This can be used to create a vector of dates that you want to project a species distribution at.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co"># 5 day intervals</span></span>
<span><span class="fu"><a href="../reference/dynamic_proj_dates.html">dynamic_proj_dates</a></span><span class="op">(</span>startdate <span class="op">=</span> <span class="st">"2018-01-01"</span>,</span>
<span>                   enddate <span class="op">=</span> <span class="st">"2018-12-01"</span>,</span>
<span>                   interval <span class="op">=</span> <span class="fl">5</span>, </span>
<span>                   interval.level <span class="op">=</span> <span class="st">"day"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2018-01-01" "2018-01-06" "2018-01-11" "2018-01-16" "2018-01-21"</span></span>
<span><span class="co">#&gt;  [6] "2018-01-26" "2018-01-31" "2018-02-05" "2018-02-10" "2018-02-15"</span></span>
<span><span class="co">#&gt; [11] "2018-02-20" "2018-02-25" "2018-03-02" "2018-03-07" "2018-03-12"</span></span>
<span><span class="co">#&gt; [16] "2018-03-17" "2018-03-22" "2018-03-27" "2018-04-01" "2018-04-06"</span></span>
<span><span class="co">#&gt; [21] "2018-04-11" "2018-04-16" "2018-04-21" "2018-04-26" "2018-05-01"</span></span>
<span><span class="co">#&gt; [26] "2018-05-06" "2018-05-11" "2018-05-16" "2018-05-21" "2018-05-26"</span></span>
<span><span class="co">#&gt; [31] "2018-05-31" "2018-06-05" "2018-06-10" "2018-06-15" "2018-06-20"</span></span>
<span><span class="co">#&gt; [36] "2018-06-25" "2018-06-30" "2018-07-05" "2018-07-10" "2018-07-15"</span></span>
<span><span class="co">#&gt; [41] "2018-07-20" "2018-07-25" "2018-07-30" "2018-08-04" "2018-08-09"</span></span>
<span><span class="co">#&gt; [46] "2018-08-14" "2018-08-19" "2018-08-24" "2018-08-29" "2018-09-03"</span></span>
<span><span class="co">#&gt; [51] "2018-09-08" "2018-09-13" "2018-09-18" "2018-09-23" "2018-09-28"</span></span>
<span><span class="co">#&gt; [56] "2018-10-03" "2018-10-08" "2018-10-13" "2018-10-18" "2018-10-23"</span></span>
<span><span class="co">#&gt; [61] "2018-10-28" "2018-11-02" "2018-11-07" "2018-11-12" "2018-11-17"</span></span>
<span><span class="co">#&gt; [66] "2018-11-22" "2018-11-27"</span></span>
<span></span>
<span><span class="co"># 2 week intervals</span></span>
<span><span class="fu"><a href="../reference/dynamic_proj_dates.html">dynamic_proj_dates</a></span><span class="op">(</span>startdate <span class="op">=</span> <span class="st">"2018-01-01"</span>,</span>
<span>                   enddate <span class="op">=</span> <span class="st">"2018-12-01"</span>,</span>
<span>                   interval <span class="op">=</span> <span class="fl">2</span>, </span>
<span>                   interval.level <span class="op">=</span> <span class="st">"week"</span><span class="op">)</span></span>
<span><span class="co">#&gt;  [1] "2018-01-01" "2018-01-15" "2018-01-29" "2018-02-12" "2018-02-26"</span></span>
<span><span class="co">#&gt;  [6] "2018-03-12" "2018-03-26" "2018-04-09" "2018-04-23" "2018-05-07"</span></span>
<span><span class="co">#&gt; [11] "2018-05-21" "2018-06-04" "2018-06-18" "2018-07-02" "2018-07-16"</span></span>
<span><span class="co">#&gt; [16] "2018-07-30" "2018-08-13" "2018-08-27" "2018-09-10" "2018-09-24"</span></span>
<span><span class="co">#&gt; [21] "2018-10-08" "2018-10-22" "2018-11-05" "2018-11-19"</span></span></code></pre></div>
<p>For this tutorial, we will use the following projection dates to explore the intra-annual distribution patterns of red-billed quelea in southern Africa.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">projectiondates</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/dynamic_proj_dates.html">dynamic_proj_dates</a></span><span class="op">(</span>startdate <span class="op">=</span> <span class="st">"2018-01-01"</span>,</span>
<span>                                      enddate <span class="op">=</span> <span class="st">"2018-12-01"</span>,</span>
<span>                                      interval <span class="op">=</span> <span class="fl">3</span>,</span>
<span>                                      interval.level <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="b-extract-projection-rasters">b) Extract projection rasters<a class="anchor" aria-label="anchor" href="#b-extract-projection-rasters"></a>
</h3>
<p>Extract_dynamic_raster and extract_buffered_raster are sister functions to those used in stage 2 to extract explanatory variables. They require largely the same arguments input, but with arguments to specify the temporal (projection dates) and spatial extents for the rasters.</p>
<p>Run the following code to extract rasters for each explanatory variable and projection date.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sample_extent_data"</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/extract_dynamic_raster.html">extract_dynamic_raster</a></span><span class="op">(</span>dates<span class="op">=</span><span class="va">projectiondates</span>,</span>
<span>                       datasetname <span class="op">=</span> <span class="st">"UCSB-CHG/CHIRPS/DAILY"</span>,</span>
<span>                       bandname<span class="op">=</span><span class="st">"precipitation"</span>,</span>
<span>                       user.email <span class="op">=</span> <span class="va">user.email</span>,</span>
<span>                       save.drive.folder <span class="op">=</span> <span class="va">save.drive.folder</span>,</span>
<span>                       spatial.res.metres <span class="op">=</span> <span class="fl">5566</span>,</span>
<span>                       GEE.math.fun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                       temporal.direction <span class="op">=</span> <span class="st">"prior"</span>,</span>
<span>                       temporal.res <span class="op">=</span> <span class="fl">56</span>,</span>
<span>                       spatial.ext <span class="op">=</span> <span class="va">sample_extent_data</span>,</span>
<span>                       varname <span class="op">=</span> <span class="va">variablenames</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span>,</span>
<span>                       save.directory<span class="op">=</span><span class="va">projectionrasters</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="../reference/extract_dynamic_raster.html">extract_dynamic_raster</a></span><span class="op">(</span>dates<span class="op">=</span><span class="va">projectiondates</span>,</span>
<span>                       datasetname <span class="op">=</span> <span class="st">"UCSB-CHG/CHIRPS/DAILY"</span>,</span>
<span>                       bandname<span class="op">=</span><span class="st">"precipitation"</span>,</span>
<span>                       user.email <span class="op">=</span> <span class="va">user.email</span>,</span>
<span>                       save.drive.folder <span class="op">=</span> <span class="va">save.drive.folder</span>,</span>
<span>                       spatial.res.metres <span class="op">=</span> <span class="fl">5566</span>,</span>
<span>                       GEE.math.fun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                       temporal.direction <span class="op">=</span> <span class="st">"prior"</span>,</span>
<span>                       temporal.res <span class="op">=</span> <span class="fl">364</span>,</span>
<span>                       spatial.ext <span class="op">=</span> <span class="va">sample_extent_data</span>,</span>
<span>                       varname <span class="op">=</span> <span class="va">variablenames</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span>,</span>
<span>                       save.directory<span class="op">=</span><span class="va">projectionrasters</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">matrix</span><span class="op">&lt;-</span><span class="fu">dynamicSDM</span><span class="fu">::</span><span class="fu"><a href="../reference/get_moving_window.html">get_moving_window</a></span><span class="op">(</span>radial.distance <span class="op">=</span> <span class="fl">10000</span>,spatial.res.degrees <span class="op">=</span> <span class="fl">0.05</span>,spatial.ext <span class="op">=</span> <span class="va">sample_extent_data</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="../reference/extract_buffered_raster.html">extract_buffered_raster</a></span><span class="op">(</span>dates<span class="op">=</span><span class="va">projectiondates</span>,</span>
<span>                        datasetname <span class="op">=</span> <span class="st">"MODIS/006/MCD12Q1"</span>,</span>
<span>                        bandname<span class="op">=</span><span class="st">"LC_Type5"</span>,</span>
<span>                        spatial.res.metres <span class="op">=</span> <span class="fl">500</span>,</span>
<span>                        GEE.math.fun <span class="op">=</span> <span class="st">"sum"</span>,</span>
<span>                        moving.window.matrix<span class="op">=</span><span class="va">matrix</span>,</span>
<span>                        save.drive.folder <span class="op">=</span> <span class="va">save.drive.folder</span>,</span>
<span>                        user.email<span class="op">=</span><span class="va">user.email</span>,</span>
<span>                        categories<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">6</span>,<span class="fl">7</span><span class="op">)</span>,</span>
<span>                        agg.factor <span class="op">=</span> <span class="fl">12</span>,</span>
<span>                        spatial.ext <span class="op">=</span> <span class="va">sample_extent_data</span>,</span>
<span>                        varname <span class="op">=</span> <span class="va">variablenames</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span>,</span>
<span>                        save.directory<span class="op">=</span><span class="va">projectionrasters</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="c-combine-dynamic-projection-covariates">c) Combine dynamic projection covariates<a class="anchor" aria-label="anchor" href="#c-combine-dynamic-projection-covariates"></a>
</h3>
<p>Now we need to combine the rasters for each variable into single projection covariate data frames for each projection date.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dynamic_proj_covariates.html">dynamic_proj_covariates</a></span><span class="op">(</span>dates<span class="op">=</span><span class="va">projectiondates</span>,</span>
<span>           varnames<span class="op">=</span><span class="va">variablenames</span>,</span>
<span>           local.directory<span class="op">=</span><span class="va">projectionrasters</span>,</span>
<span>           spatial.ext<span class="op">=</span><span class="va">sample_extent_data</span>,</span>
<span>           spatial.mask<span class="op">=</span><span class="va">sample_extent_data</span>,</span>
<span>           spatial.res.degrees <span class="op">=</span> <span class="fl">0.05</span>,</span>
<span>           resample.method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"bilinear"</span>,<span class="st">"bilinear"</span>,<span class="st">"ngb"</span><span class="op">)</span>,</span>
<span>           cov.file.type <span class="op">=</span> <span class="st">"csv"</span>,</span>
<span>           prj<span class="op">=</span><span class="st">"+proj=longlat +datum=WGS84"</span>,</span>
<span>           save.directory <span class="op">=</span> <span class="va">projection_covariates</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="d-project-models-onto-covariates">d) Project models onto covariates<a class="anchor" aria-label="anchor" href="#d-project-models-onto-covariates"></a>
</h3>
<p>To project distribution onto these covariates, our fitted boosted regression tree models from stage 3 need to be imported and input into dynamic_proj(). You can read these in from your local directory, or simply rerun the code here.</p>
<p>We choose to project distribution suitability (projection.method = “proportional”) but this function can also generate binary projections if given threshold (sdm.thresh) or abundance if given fitted species abundance models (sam.mod).</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="co">#sample_brt_models&lt;- readRDS(paste0(project_directory, "/fitted_quelea_SDMs.rds"))</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sample_explan_data"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sample_explan_data</span><span class="op">$</span><span class="va">weights</span> <span class="op">&lt;-</span> <span class="op">(</span><span class="fl">1</span> <span class="op">-</span> <span class="va">sample_explan_data</span><span class="op">$</span><span class="va">REL_SAMP_EFFORT</span><span class="op">)</span></span>
<span></span>
<span><span class="va">sample_brt_models</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/brt_fit.html">brt_fit</a></span><span class="op">(</span><span class="va">sample_explan_data</span>,</span>
<span>                  response.col <span class="op">=</span> <span class="st">"presence.absence"</span>,</span>
<span>                  varnames <span class="op">=</span> <span class="va">variablenames</span>,</span>
<span>                  block.col <span class="op">=</span> <span class="st">"BLOCK.CATS"</span>,</span>
<span>                  weights.col <span class="op">=</span> <span class="st">"weights"</span>,</span>
<span>                  distribution <span class="op">=</span> <span class="st">"bernoulli"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="fu"><a href="../reference/dynamic_proj.html">dynamic_proj</a></span><span class="op">(</span>dates <span class="op">=</span> <span class="va">projectiondates</span>,</span>
<span>             projection.method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"proportional"</span><span class="op">)</span>,</span>
<span>             local.directory <span class="op">=</span> <span class="va">projection_covariates</span>,</span>
<span>             cov.file.type <span class="op">=</span> <span class="st">"csv"</span>,</span>
<span>             sdm.mod <span class="op">=</span> <span class="va">sample_brt_models</span>,</span>
<span>             spatial.mask <span class="op">=</span> <span class="va">sample_extent_data</span>,</span>
<span>             save.directory <span class="op">=</span> <span class="va">projection_directories</span><span class="op">)</span></span></code></pre></div>
<p>Let’s read in and plot our projections!</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">sp</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">projection_directories</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">sp</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">projection_directories</span><span class="op">)</span><span class="op">[</span><span class="fl">2</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">sp</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">projection_directories</span><span class="op">)</span><span class="op">[</span><span class="fl">3</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">sp</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/list.files.html" class="external-link">list.files</a></span><span class="op">(</span><span class="va">projection_directories</span><span class="op">)</span><span class="op">[</span><span class="fl">4</span><span class="op">]</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="e-visualise-projections-with-a-gif">e) Visualise projections with a GIF<a class="anchor" aria-label="anchor" href="#e-visualise-projections-with-a-gif"></a>
</h3>
<p>To better visualise our dynamic distribution projections through time, dynamic_proj_GIF() can generate animated GIFs from the projection rasters</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/dynamic_proj_GIF.html">dynamic_proj_GIF</a></span><span class="op">(</span>dates <span class="op">=</span> <span class="va">projectiondates</span>,</span>
<span>                 projection.type <span class="op">=</span> <span class="st">"proportional"</span>,</span>
<span>                 local.directory <span class="op">=</span> <span class="va">projection_directories</span>,</span>
<span>                 save.directory <span class="op">=</span> <span class="va">projection_GIF</span>,</span>
<span>                 legend.max <span class="op">=</span> <span class="fl">1</span>,</span>
<span>                 legend.min <span class="op">=</span> <span class="fl">0</span>,</span>
<span>                 width <span class="op">=</span> <span class="fl">650</span>,</span>
<span>                 legend.name <span class="op">=</span> <span class="st">"Distribution\n suitability"</span><span class="op">)</span></span></code></pre></div>
</div>
</div>
<div class="section level2">
<h2 id="summary">Summary<a class="anchor" aria-label="anchor" href="#summary"></a>
</h2>
<ul>
<li><p>This concludes the <em>dynamicSDM</em> tutorial. We hope that you have been able to utilise the package to model the dynamic distributions of our case study species, the red-billed quelea, and can now apply these functions to your own study species!</p></li>
<li><p>We have demonstrated a variety of options across our functions, but even more are available with the diverse and flexible arguments. Please see our package manual for full details of each <em>dynamicSDM</em> function <a href="https://github.com/r-a-dobson/dynamicSDM/blob/main/man/figures/dynamicSDM_1.0.pdf" class="external-link">manual</a>.</p></li>
<li><p>Also, please visit the GitHub discussion page for <em>dynamicSDM</em> if you have any questions or are facing errors with any of our functions <a href="https://github.com/r-a-dobson/dynamicSDM/discussions" class="external-link">github</a>. We also have a quick guide to common bugs that are thrown up when installing and running <em>dynamicSDM</em>.</p></li>
</ul>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

        <nav id="toc" data-toggle="toc"><h2 data-toc-skip>Contents</h2>
    </nav>
</div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Rachel Dobson, Andy J. Challinor, Robert A. Cheke, Stewart Jennings, Stephen G. Willis, Martin Dallimer.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer>
</div>

  


  

  </body>
</html>
