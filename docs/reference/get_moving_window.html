<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Generate a “moving window” matrix of optimal size — get_moving_window • dynamicSDM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Generate a “moving window” matrix of optimal size — get_moving_window"><meta property="og:description" content="Calculates an optimal “moving window” matrix size for use when extracting spatially buffered
explanatory variables, by using the radius of interest and spatial resolution of environmental
data."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynamicSDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/vig0.html">vig0</a>
    </li>
    <li>
      <a href="../articles/vignette1_response_data.html">dynamicSDM: Response variable data</a>
    </li>
    <li>
      <a href="../articles/vignette2_explanatory_data.html">dynamicSDM: Explanatory variable data</a>
    </li>
    <li>
      <a href="../articles/vignette3_modelling.html">dynamicSDM: model fitting and autocorrelation</a>
    </li>
    <li>
      <a href="../articles/vignette4_projecting.html">dynamicSDM: dynamic distribution projections</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Generate a “moving window” matrix of optimal size</h1>
    
    <div class="hidden name"><code>get_moving_window.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Calculates an optimal “moving window” matrix size for use when extracting spatially buffered
explanatory variables, by using the radius of interest and spatial resolution of environmental
data.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">get_moving_window</span><span class="op">(</span></span>
<span>  <span class="va">radial.distance</span>,</span>
<span>  <span class="va">spatial.res.degrees</span>,</span>
<span>  <span class="va">spatial.res.metres</span>,</span>
<span>  <span class="va">spatial.ext</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>radial.distance</dt>
<dd><p>a numeric value, the radius of interest in metres.</p></dd>


<dt>spatial.res.degrees</dt>
<dd><p>a numeric value, the spatial resolution in degrees of explanatory
variable data.</p></dd>


<dt>spatial.res.metres</dt>
<dd><p>a numeric value, the spatial resolution in metres of explanatory
variable data.</p></dd>


<dt>spatial.ext</dt>
<dd><p>the spatial extent of the study. Object from which extent can be extracted of
class <code>Extent</code>, <code>RasterLayer</code>, <code>sf</code> or <code>polygon</code> or numeric vector listing xmin, xmax, ymin and
ymax in order.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns "moving window" matrix with an odd number of sides and equal weights.</p>
    </div>
    <div id="importance-for-other-functions-in-dynamicsdm-to-extract-spatially-buffered-explanatory">
    <h2>Importance for other functions in <code>dynamicSDM</code> To extract spatially buffered explanatory</h2>
    <p>variable data using dynamicSDM functions <code><a href="extract_buffered_coords.html">extract_buffered_coords()</a></code> or
<code><a href="extract_buffered_raster.html">extract_buffered_raster()</a></code>, a “moving window” matrix specifying the neighbourhood of cells to
include in the calculation is required.</p>
<p>For example, by using a three by three “moving window” matrix of equal weights, the explanatory
variable would be calculated across the nine grid cells neighbouring the cell of interest and the
cell of interest.</p>
    </div>
    <div id="why-use-a-moving-window-matrix-instead-of-circular-buffer-the-benefit-of-using-a-moving">
    <h2>Why use a moving window matrix instead of circular buffer? The benefit of using a “moving</h2>
    <p>window” over calculating explanatory variable values across a set radius from each record
co-ordinate, is that when generating projection rasters at high spatial and temporal resolution,
these can be generated much faster as the “moving windows” standardise the calculation.</p>
    </div>
    <div id="function-calculation">
    <h2>Function calculation</h2>
    
<ul><li><p></p><ol><li><p>To calculate the “moving window” matrix size, the <code>get_moving_window()</code> function first
calculates the circular area of interest, using the user-specified radius of interest and the
equation for area of a circle.</p></li>
</ol></li>
</ul><p>This radius should be chosen to represent the radial distance from species occurrence record
co-ordinates that the explanatory variable data might be relevant and impact species presence.</p><ul><li><p></p><ol><li><p>Then, the average grid cell area of the explanatory variable data (derived from user-provided
spatial resolution and extent) is calculated. If <code>spatial.res.degrees</code> is given then <code>spatial.ext</code>
is required to calculate average cell area size. If <code>spatial.res.metres</code> is given then average
cell area is calculated by squaring this value to get cell area in square metres.</p></li>
</ol></li>
<li><p></p><ol><li><p>Finally, the function then calculates the optimal “moving window” matrix that best matches
circular area of interest with the “moving window” matrix area. The matrix of weights will have an
odd number of sides.</p></li>
</ol></li>
</ul></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="fu">get_moving_window</span><span class="op">(</span>radial.distance <span class="op">=</span> <span class="fl">100000</span>, spatial.res.metres <span class="op">=</span> <span class="fl">111320</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    1    1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    1    1    1</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sample_extent_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">get_moving_window</span><span class="op">(</span></span></span>
<span class="r-in"><span>radial.distance <span class="op">=</span> <span class="fl">100000</span>,</span></span>
<span class="r-in"><span> spatial.res.degrees <span class="op">=</span> <span class="fl">0.5</span>,</span></span>
<span class="r-in"><span> spatial.ext <span class="op">=</span> <span class="va">sample_extent_data</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>      [,1] [,2] [,3]</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [1,]    1    1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [2,]    1    1    1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> [3,]    1    1    1</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rachel Dobson, Andy J. Challinor, Robert A. Cheke, Stewart Jennings, Stephen G. Willis, Martin Dallimer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

