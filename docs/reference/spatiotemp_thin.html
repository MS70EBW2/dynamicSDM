<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Thin species occurrence records by spatial and temporal proximity. — spatiotemp_thin • dynamicSDM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Thin species occurrence records by spatial and temporal proximity. — spatiotemp_thin"><meta property="og:description" content="Thins species occurrence records that are within minimum spatial and temporal distance apart."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynamicSDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/vig0.html">vig0</a>
    </li>
    <li>
      <a href="../articles/vignette1_response_data.html">dynamicSDM: Response variable data</a>
    </li>
    <li>
      <a href="../articles/vignette2_explanatory_data.html">dynamicSDM: Explanatory variable data</a>
    </li>
    <li>
      <a href="../articles/vignette3_modelling.html">dynamicSDM: model fitting and autocorrelation</a>
    </li>
    <li>
      <a href="../articles/vignette4_projecting.html">dynamicSDM: dynamic distribution projections</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Thin species occurrence records by spatial and temporal proximity.</h1>
    
    <div class="hidden name"><code>spatiotemp_thin.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Thins species occurrence records that are within minimum spatial and temporal distance apart.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">spatiotemp_thin</span><span class="op">(</span></span>
<span>  <span class="va">occ.data</span>,</span>
<span>  <span class="va">temporal.method</span>,</span>
<span>  <span class="va">temporal.dist</span>,</span>
<span>  <span class="va">spatial.split.degrees</span>,</span>
<span>  <span class="va">spatial.dist</span>,</span>
<span>  iterations <span class="op">=</span> <span class="fl">100</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>occ.data</dt>
<dd><p>a data frame, with columns for occurrence record co-ordinates and dates with
column names as follows; record longitude as "x", latitude as "y", year as "year", month as
"month", and day as "day".</p></dd>


<dt>temporal.method</dt>
<dd><p>a character string, the method to calculate temporal distance between
records. One of <code>DOY</code> or <code>day.</code> See details for more information.</p></dd>


<dt>temporal.dist</dt>
<dd><p>a numeric value, the temporal buffer in days to thin records by.</p></dd>


<dt>spatial.split.degrees</dt>
<dd><p>a numeric value, the grid cell resolution in degrees to split
occurrence records by before temporal thinning.</p></dd>


<dt>spatial.dist</dt>
<dd><p>a numeric value, the spatial buffer distances in metres to thin records by.</p></dd>


<dt>iterations</dt>
<dd><p>a numeric value, the number of iterations to randomly thin occurrence records
by. Default; 100.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns data frame of occurrence records thinned by specified temporal and spatial
distance.</p>
    </div>
    <div id="overview">
    <h2>Overview</h2>
    <p><code>spatiotemp_thin()</code> calculates the temporal distance between occurrence records in given area
and excludes records below minimum temporal distance apart. Then calculates spatial distance
between all occurrence records and filters records below minimum spatial distance apart. Thus,
<code>spatiotemp_thin()</code> offers spatial and temporal thinning, improving functionality for dynamic species
distribution modelling compared to existing <code>spThin</code> package functions (Aiello-Lammens et al.,
2015).</p>
    </div>
    <div id="temporal-thinning-methods">
    <h2>Temporal thinning methods</h2>
    <p>For temporal thinning, the function first splits occurrence records into grid cells of
given size in degrees (set by spatial.split.degrees). This is to prevent spatially distant but
temporally close records from being excluded. For each grid cell, all records within the cell are
temporally thinned. This process works by removing records that are within given temporal distance
(temporal.dist) from each other by randomly selecting one of the two. This iterates through until
no records are within the given temporal distance of each other in each grid cell, following a
similar algorithm to <code>spThin</code> (Aiello-Lammens et al., 2015).</p>
<p>Two methods exist for measuring the temporal distance between occurrence records.</p><ul><li><p></p><ol><li><p><code>doy</code> - calculates the minimum days apart within the annual cycle</p></li>
</ol></li>
<li><p></p><ol><li><p><code>day</code> uses the absolute number of days.</p></li>
</ol></li>
</ul><p>For instance, two dates “2010-01-05” and “2012-12-05” can be calculated as either
1065 absolute days apart, or within the annual cycle these dates represent day 5 and day 339 of
the year, and are 31 days apart. Therefore, thinning by 40 days using the DOY method would remove
one of these records, but using the day method would not. The chosen <code>temporal.method</code> will depend
upon whether bias towards a point within the annual cycle is more likely to bias models than bias
towards a given point in linear time.</p>
    </div>
    <div id="spatial-thinning">
    <h2>Spatial thinning</h2>
    <p>Following temporal thinning, spatial thinning occurs across entire dataset. The spatial distance
between each record is calculated, and records within the given spatial distance (<code>spatial.dist</code>)
from each other are excluded by randomly selecting one of these. This iterates through until no
records are with the given spatial distances of each other across entire dataset, again following
a similar algorithm to <code>spThin</code> (Aiello-Lammens et al., 2015).</p>
<p>As random selection could alter the total number of occurrence records remaining in the occurrence
record dataset, this process is iterated through a specified number of times and the thinned data
frame with the highest number of records remaining is returned.</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Aiello-Lammens, M. E., Boria, R. A., Radosavljevic, A., Vilela, B. &amp; Anderson, R. P.
2015. spThin: an R package for spatial thinning of species occurrence records for use in
ecological niche models. Ecography, 38, 541-545.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sample_filt_data"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">spatiotemp_thin</span><span class="op">(</span></span></span>
<span class="r-in"><span> occ.data <span class="op">=</span> <span class="va">sample_filt_data</span>,</span></span>
<span class="r-in"><span> temporal.method <span class="op">=</span> <span class="st">"day"</span>,</span></span>
<span class="r-in"><span> temporal.dist <span class="op">=</span> <span class="fl">100</span>,</span></span>
<span class="r-in"><span> spatial.split.degrees <span class="op">=</span> <span class="fl">3</span>,</span></span>
<span class="r-in"><span> spatial.dist <span class="op">=</span> <span class="fl">100000</span>,</span></span>
<span class="r-in"><span> iterations <span class="op">=</span> <span class="fl">5</span></span></span>
<span class="r-in"><span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span>            x         y year month day decimalLatitude decimalLongitude</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13  15.48417 -19.35105 2016     7   3       -19.35105         15.48417</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16  16.93718 -18.76557 2018     7  11       -18.76557         16.93718</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 111 17.86674 -22.55155 2016     5   2       -22.55155         17.86674</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18  22.16667 -26.53333 2005     5  18       -26.53333         22.16667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22  24.62272 -26.54049 2017    12   1       -26.54049         24.62272</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32  23.45594 -28.37425 2005    10  24       -28.37425         23.45594</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81  24.84293 -28.10646 2018     9  11       -28.10646         24.84293</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33  24.37663 -33.29126 2016     1  17       -33.29126         24.37663</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73  25.45792 -31.37458 2014     1   2       -31.37458         25.45792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53  25.13545 -17.81830 2015     8  19       -17.81830         25.13545</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101 26.29125 -18.45792 2013     4  23       -18.45792         26.29125</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 181 26.73333 -26.36667 2009     5  25       -26.36667         26.73333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40  27.70792 -26.87458 2018     7  12       -26.87458         27.70792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56  25.51798 -28.83252 2016    12  18       -28.83252         25.51798</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 182 27.37582 -28.95870 2007     3  18       -28.95870         27.37582</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 117 26.50205 -24.68161 2016     8  26       -24.68161         26.50205</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 118 27.41655 -21.34998 2004     9   1       -21.34998         27.41655</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 401 28.58333 -25.95000 2005     7  12       -25.95000         28.58333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 522 29.37353 -25.37604 2018     9  11       -25.37604         29.37353</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57  29.45901 -27.20872 2016     5  20       -27.20872         29.45901</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 641 30.74723 -27.03281 2016    10  20       -27.03281         30.74723</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 119 28.31454 -28.24909 2018     2   8       -28.24909         28.31454</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67  29.95792 -29.37458 2013    10  26       -29.37458         29.95792</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 142 30.04271 -28.29271 2005     7  23       -28.29271         30.04271</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120 28.31667 -24.90000 2007     1   9       -24.90000         28.31667</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85  30.37642 -24.79113 2018     5  18       -24.79113         30.37642</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 212 28.68333 -20.18333 2007     1   9       -20.18333         28.68333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36  29.83333 -19.50000 2007    10  11       -19.50000         29.83333</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68  31.12536 -22.28966 2006     3  22       -22.28966         31.12536</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 191 31.46001 -23.45804 2009     2  27       -23.45804         31.46001</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 243 31.79111 -24.37245 2016     7   3       -24.37245         31.79111</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 310 31.16767 -17.66439 2008     2  23       -17.66439         31.16767</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 87  32.62458 -18.95792 2015    12  16       -18.95792         32.62458</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 311 31.79160 -25.62652 2009     7   1       -25.62652         31.79160</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96  31.88483 -27.40119 2016    12  27       -27.40119         31.88483</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 214 33.58406 -10.83137 2018     5  12       -10.83137         33.58406</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127 34.36077 -18.96188 2017     8  20       -18.96188         34.36077</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>     occurrenceStatus     source species SAMP_EFFORT REL_SAMP_EFFORT split2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 13            absent dynamicSDM     RBQ           0       0.1428571     32</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 16            absent dynamicSDM     RBQ           0       0.1428571     23</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 111           absent dynamicSDM     RBQ           0       0.1428571     43</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 18           present   gbifdata     RBQ           0       0.1428571     55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 22            absent dynamicSDM     RBQ           2       0.4285714     55</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 32            absent dynamicSDM     RBQ           0       0.1428571     65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 81            absent dynamicSDM     RBQ           0       0.1428571     65</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 33            absent dynamicSDM     RBQ           0       0.1428571     75</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 73           present   gbifdata     RBQ           0       0.1428571     76</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 53            absent dynamicSDM     RBQ           0       0.1428571     26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 101          present   gbifdata     RBQ           0       0.1428571     26</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 181          present   gbifdata     RBQ           0       0.1428571     56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 40           present   gbifdata     RBQ           0       0.1428571     56</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 56            absent dynamicSDM     RBQ           0       0.1428571     66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 182           absent dynamicSDM     RBQ           0       0.1428571     66</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 117           absent dynamicSDM     RBQ           0       0.1428571     46</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 118          present   gbifdata     RBQ           0       0.1428571     36</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 401          present   gbifdata     RBQ           0       0.1428571     57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 522           absent dynamicSDM     RBQ           0       0.1428571     57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 57            absent dynamicSDM     RBQ           0       0.1428571     57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 641          present   gbifdata     RBQ           0       0.1428571     57</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 119           absent dynamicSDM     RBQ           0       0.1428571     67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 67           present   gbifdata     RBQ           0       0.1428571     67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 142           absent dynamicSDM     RBQ           0       0.1428571     67</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 120          present   gbifdata     RBQ           0       0.1428571     47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 85            absent dynamicSDM     RBQ           0       0.1428571     47</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 212          present   gbifdata     RBQ           0       0.1428571     37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 36           present   gbifdata     RBQ           0       0.1428571     37</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 68            absent dynamicSDM     RBQ           0       0.1428571     48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 191           absent dynamicSDM     RBQ           0       0.1428571     48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 243           absent dynamicSDM     RBQ           0       0.1428571     48</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 310           absent dynamicSDM     RBQ           0       0.1428571     28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 87           present   gbifdata     RBQ           0       0.1428571     28</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 311           absent dynamicSDM     RBQ           1       0.2857143     58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 96            absent dynamicSDM     RBQ           0       0.1428571     58</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 214           absent dynamicSDM     RBQ           0       0.1428571      8</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 127          present   gbifdata     RBQ           0       0.1428571     29</span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rachel Dobson, Andy J. Challinor, Robert A. Cheke, Stewart Jennings, Stephen G. Willis, Martin Dallimer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

