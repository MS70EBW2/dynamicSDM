<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Project species distribution and abundance models onto dynamic environmental covariates. — dynamic_proj • dynamicSDM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Project species distribution and abundance models onto dynamic environmental covariates. — dynamic_proj"><meta property="og:description" content="Projects fitted species distribution and abundance models onto projection covariates for each date
given."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynamicSDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/vig0.html">vig0</a>
    </li>
    <li>
      <a href="../articles/vignette1_response_data.html">dynamicSDM: Response variable data</a>
    </li>
    <li>
      <a href="../articles/vignette2_explanatory_data.html">dynamicSDM: Explanatory variable data</a>
    </li>
    <li>
      <a href="../articles/vignette3_modelling.html">dynamicSDM: model fitting and autocorrelation</a>
    </li>
    <li>
      <a href="../articles/vignette4_projecting.html">dynamicSDM: dynamic distribution projections</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Project species distribution and abundance models onto dynamic environmental covariates.</h1>
    
    <div class="hidden name"><code>dynamic_proj.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Projects fitted species distribution and abundance models onto projection covariates for each date
given.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">dynamic_proj</span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  <span class="va">projection.method</span>,</span>
<span>  <span class="va">local.directory</span>,</span>
<span>  <span class="va">drive.folder</span>,</span>
<span>  <span class="va">user.email</span>,</span>
<span>  <span class="va">sdm.mod</span>,</span>
<span>  sdm.thresh <span class="op">=</span> <span class="fl">0.5</span>,</span>
<span>  sdm.weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">sam.mod</span>,</span>
<span>  sam.weight <span class="op">=</span> <span class="fl">1</span>,</span>
<span>  <span class="va">save.directory</span>,</span>
<span>  <span class="va">save.drive.folder</span>,</span>
<span>  <span class="va">cov.file.type</span>,</span>
<span>  prj <span class="op">=</span> <span class="st">"+proj=longlat +datum=WGS84"</span>,</span>
<span>  <span class="va">proj.prj</span>,</span>
<span>  <span class="va">spatial.mask</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dates</dt>
<dd><p>a character string, vector of dates in format "YYYY-MM-DD".</p></dd>


<dt>projection.method</dt>
<dd><p>a character string or vector, the method or methods to project
distribution and abundance onto projection covariates. Options include <code>proportional</code>, <code>binary</code>,
<code>abundance</code> and <code>stacked</code>. See details for more information.</p></dd>


<dt>local.directory</dt>
<dd><p>optional; a character string, the path to a local directory to read
projection covariate data frames from.</p></dd>


<dt>drive.folder</dt>
<dd><p>optional; a character string, the Google Drive folder to read projection
covariate data frames from. Folder must be uniquely named within Google Drive. Do not provide
path.</p></dd>


<dt>user.email</dt>
<dd><p>optional; a character string, user email for initialising Google Drive. Required
if drive.folder or save.drive.folder used.</p></dd>


<dt>sdm.mod</dt>
<dd><p>optional; a model object or list of model objects fitted to species distribution
data.</p></dd>


<dt>sdm.thresh</dt>
<dd><p>optional; a numeric value, the threshold to convert projected distribution
suitability into binary presence-absence. Default 0.5. Required if projection.method is
"<code>binary</code>" or  "<code>stacked</code>".</p></dd>


<dt>sdm.weight</dt>
<dd><p>optional; a numeric string, weights given to each <code>sdm.mod</code> model projection,
given in the same order as the <code>sdm.mod</code> list. Default is equal weighting to all models.</p></dd>


<dt>sam.mod</dt>
<dd><p>optional; a model object or list of model objects fitted to species abundance data.</p></dd>


<dt>sam.weight</dt>
<dd><p>optional; a numeric string, weights given to each <code>sdm.mod</code> model projection,
given in the same order as the sam.mod list. Default is equal weighting to all models.</p></dd>


<dt>save.directory</dt>
<dd><p>optional; a character string, path to local directory to save projection
rasters to.</p></dd>


<dt>save.drive.folder</dt>
<dd><p>optional; a character string, Google Drive folder to save projection
rasters to. Folder must be uniquely named within Google Drive. Do not provide path.</p></dd>


<dt>cov.file.type</dt>
<dd><p>a character string, the type of file that contains projection covariates. One
of: "<code>tif</code>" (raster stack) or <code>csv</code>(data frame).</p></dd>


<dt>prj</dt>
<dd><p>a character string, the coordinate reference system of input projection covariates.
Default is "+proj=longlat +datum=WGS84".</p></dd>


<dt>proj.prj</dt>
<dd><p>a character string, the coordinate reference system desired for output projection
rasters. Default is assumed to be the same as prj.</p></dd>


<dt>spatial.mask</dt>
<dd><p>an object of class <code>Raster</code>, <code>sf</code> or <code>Spatial</code>, represeting a mask in which NA
cells in the mask layer are removed from the projection covariates.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Exports projection rasters for each projection date to user-specified Google Drive
folder or local directory.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Function projects a model object or list of model objects onto projection covariate data
frames for each projection date given.</p>
    </div>
    <div id="projection-covariate-input">
    <h2>Projection covariate input</h2>
    
<ul><li><p>Data frames: if <code>cov.file.type</code> = <code>csv</code>, then projection covariates must be saved ".csv" files
in the drive.folder or local.directory given. Here, they must be unique in containing the
relevant projection date in “YYYY-MM-DD” format. For instance, two or more “.csv” files saved
within the Google Drive folder or local directory that contain the projection date will result
in function error. Additionally, column names of projection covariate data frames must match the
explanatory variable names that fitted models are trained on.</p></li>
<li><p>Raster stacks: if <code>cov.file.type</code> = <code>tif</code>, then projection covariates must be saved ".tif"
files, similarly named and formatted as above. Raster layer names must match the explanatory
variable names that fitted models are trained on.</p></li>
</ul><p>Note: It is important to state the coordinate reference system projection of covariates using
argument <code>prj</code>.</p>
    </div>
    <div id="model-input">
    <h2>Model input</h2>
    <p>When multiple models are provided in <code>sdm.mod</code> or <code>sam.mod</code>, the function projects each model
onto the projection covariates and takes the average value across all model projections. If
<code>sdm.weight</code> or <code>sam.weight</code> is specified, then the weighted average of model projections is
returned. For example, this could be used to down weigh projections by poorly performing models
in an ensemble.</p>
    </div>
    <div id="projection-output">
    <h2>Projection output</h2>
    
<ul><li><p>proportional: Projects <code>sdm.mod</code> model objects onto projection covariates for each date,
exporting rasters for projected distribution suitability, a continuous measure between 0 (least
suitable) and 1 (most suitable).</p></li>
<li><p>binary: Projects <code>sdm.mod</code> onto projection covariates for each date, exporting rasters for
projected binary presence (1) or absence (0), derived from distribution suitability using
user-specified threshold (<code>sdm.thresh</code>) or default threshold of 0.5.</p></li>
<li><p>abundance: Projects <code>sam.mod</code> onto projections covariates for each date, exporting rasters for
projected abundance in the units that <code>sam.mod</code> were fitted onto.</p></li>
<li><p>stacked: Follows the binary projection method and then projects abundance onto only binary
presence (1) cells using the abundance projection method.</p></li>
</ul><p>Projections are output as rasters. These can be reprojected to a different coordinate reference
system using argument <code>proj.prj</code>.</p>
<p>One or both of <code>save.drive.folder</code> and <code>save.directory</code> are required to specify where projection
rasters are to be saved.</p>
    </div>
    <div id="google-drive-compatibility">
    <h2>Google Drive compatibility</h2>
    <p>If <code>drive.folder</code> or <code>save.drive.folder</code> given, please ensure the folder name is unique within your
Google Drive. Do not provide the path if the folder is nested within others.</p>
<p>If one of <code>drive.folder</code> or <code>save.drive.folder</code> are used then user.email is required to access the
appropriate Google Drive user account. This requires users to have installed R package
<code>googledrive</code> and initialised Google Drive with valid log-in credentials. Please follow
instructions on <a href="https://googledrive.tidyverse.org/" class="external-link">https://googledrive.tidyverse.org/</a>.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sample_explan_data"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">variablenames</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"eight_sum_prec"</span>,<span class="st">"year_sum_prec"</span>,<span class="st">"grass_crop_percentage"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">model</span> <span class="op">&lt;-</span> <span class="fu"><a href="brt_fit.html">brt_fit</a></span><span class="op">(</span><span class="va">sample_explan_data</span>,</span></span>
<span class="r-in"><span>                 response.col <span class="op">=</span> <span class="st">"presence.absence"</span>,</span></span>
<span class="r-in"><span>                 varnames <span class="op">=</span> <span class="va">variablenames</span>,</span></span>
<span class="r-in"><span>                 interaction.depth<span class="op">=</span><span class="fl">2</span>,</span></span>
<span class="r-in"><span>                 distribution <span class="op">=</span> <span class="st">"bernoulli"</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> block.col not specified. Model will be fit on all occ.data.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> weights.col not specified. All records equally weighted.</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sample_cov_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="va">sample_extent_data</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/write.table.html" class="external-link">write.csv</a></span><span class="op">(</span><span class="va">sample_cov_data</span>,file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"/2018-04-01_covariates.csv"</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">dynamic_proj</span><span class="op">(</span>dates <span class="op">=</span> <span class="st">"2018-04-01"</span>,</span></span>
<span class="r-in"><span>            projection.method <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"proportional"</span>,<span class="st">"binary"</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>            local.directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>           cov.file.type <span class="op">=</span> <span class="st">"csv"</span>,</span></span>
<span class="r-in"><span>            sdm.mod <span class="op">=</span> <span class="va">model</span>,</span></span>
<span class="r-in"><span>            spatial.mask <span class="op">=</span> <span class="va">sample_extent_data</span>,</span></span>
<span class="r-in"><span>            save.directory <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No sdm.thresh. Default 0.5</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> No sdm.weight specified. Default equal weighting.</span>
<span class="r-msg co"><span class="r-pr">#&gt;</span> Using 5000 trees...</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">sp</span><span class="fu">::</span><span class="fu">plot</span><span class="op">(</span><span class="fu">raster</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/raster/man/raster.html" class="external-link">raster</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/tempfile.html" class="external-link">tempdir</a></span><span class="op">(</span><span class="op">)</span>,<span class="st">"/2018-04-01_proportional.tif"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-plt img"><img src="dynamic_proj-1.png" alt="" width="700" height="433"></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rachel Dobson, Andy J. Challinor, Robert A. Cheke, Stewart Jennings, Stephen G. Willis, Martin Dallimer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

