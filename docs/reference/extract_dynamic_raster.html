<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Extract temporally dynamic rasters of explanatory variables. — extract_dynamic_raster • dynamicSDM</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Extract temporally dynamic rasters of explanatory variables. — extract_dynamic_raster"><meta property="og:description" content="Extract rasters for temporally dynamic explanatory variables at each projection date using Google
Earth Engine."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">
    

    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">dynamicSDM</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">1.0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/vig0.html">vig0</a>
    </li>
    <li>
      <a href="../articles/vignette1_response_data.html">dynamicSDM: Response variable data</a>
    </li>
    <li>
      <a href="../articles/vignette2_explanatory_data.html">dynamicSDM: Explanatory variable data</a>
    </li>
    <li>
      <a href="../articles/vignette3_modelling.html">dynamicSDM: model fitting and autocorrelation</a>
    </li>
    <li>
      <a href="../articles/vignette4_projecting.html">dynamicSDM: dynamic distribution projections</a>
    </li>
  </ul></li>
      </ul><ul class="nav navbar-nav navbar-right"></ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Extract temporally dynamic rasters of explanatory variables.</h1>
    
    <div class="hidden name"><code>extract_dynamic_raster.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>Extract rasters for temporally dynamic explanatory variables at each projection date using Google
Earth Engine.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">extract_dynamic_raster</span><span class="op">(</span></span>
<span>  <span class="va">dates</span>,</span>
<span>  <span class="va">spatial.ext</span>,</span>
<span>  <span class="va">datasetname</span>,</span>
<span>  <span class="va">bandname</span>,</span>
<span>  <span class="va">spatial.res.metres</span>,</span>
<span>  <span class="va">GEE.math.fun</span>,</span>
<span>  <span class="va">user.email</span>,</span>
<span>  <span class="va">varname</span>,</span>
<span>  <span class="va">temporal.res</span>,</span>
<span>  <span class="va">temporal.direction</span>,</span>
<span>  <span class="va">save.directory</span>,</span>
<span>  <span class="va">save.drive.folder</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>
    <dl><dt>dates</dt>
<dd><p>a character string, vector of dates in format "YYYY-MM-DD".</p></dd>


<dt>spatial.ext</dt>
<dd><p>the spatial extent for the extracted raster. Object from which extent can be
extracted of class <code>Extent</code>, <code>RasterLayer</code>, <code>sf</code> or <code>polygon</code> or numeric vector listing xmin,
xmax, ymin and ymax in order.</p></dd>


<dt>datasetname</dt>
<dd><p>a character string, the Google Earth Engine dataset to extract data from.</p></dd>


<dt>bandname</dt>
<dd><p>a character string, the Google Earth Engine dataset bandname to extract data for.</p></dd>


<dt>spatial.res.metres</dt>
<dd><p>a numeric value, specifying the spatial resolution in metres of the
raster to be extracted.</p></dd>


<dt>GEE.math.fun</dt>
<dd><p>a character string, the mathematical function to compute across the specified
time frame from each projection date and for each cell.</p></dd>


<dt>user.email</dt>
<dd><p>a character string, user email for initialising Google Drive.</p></dd>


<dt>varname</dt>
<dd><p>optional; a character string, the unique name for the explanatory variable. Default
varname is “bandname_temporal.res_temporal.direction_ GEE.math.fun_raster".</p></dd>


<dt>temporal.res</dt>
<dd><p>a numeric value, the temporal resolution in days to extract data across.</p></dd>


<dt>temporal.direction</dt>
<dd><p>a character string, the temporal direction for extracting dynamic
variable data across relative to each projection date given. One of <code>prior</code> or <code>post</code>: can
be abbreviated.</p></dd>


<dt>save.directory</dt>
<dd><p>optional; a character string, path to local directory to save extracted
rasters to.</p></dd>


<dt>save.drive.folder</dt>
<dd><p>a character string, Google Drive folder name to save extracted rasters
to. Folder must be uniquely named within your Google Drive. Do not provide path.</p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    

<p>Returns details of successful explanatory variable extractions for each projection date.</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>For each projection date, this function downloads rasters at given spatial extent and
resolution for specified temporally dynamic explanatory variables. For each cell in spatial extent, the
GEE.math.fun is calculated for data extracted across the specified number of days prior or post the
projection date. Rasters of such data are saved directly to Google Drive, with option to export to
local directory too. These can be combined to create projection covariate data frames for
projection dynamic species distribution and abundance at high spatiotemporal resolution</p>
    </div>
    <div id="google-earth-engine">
    <h2>Google Earth Engine</h2>
    <p><code>extract_dynamic_raster()</code> requires users to have installed R package <code>rgee</code> (Aybar et al.,
2020) and initialised Google Earth Engine with valid log-in credentials. Please follow
instructions on the following website
<a href="https://cran.r-project.org/web/packages/rgee/vignettes/rgee01.html" class="external-link">https://cran.r-project.org/web/packages/rgee/vignettes/rgee01.html</a>.</p><ul><li><p><code>datasetname</code> must be in the accepted Google Earth Engine catalogue layout (e.g.
“MODIS/006/MCD12Q1” or “UCSB-CHG/CHIRPS/DAILY”)</p></li>
<li><p><code>bandname</code> must be as specified under the dataset in the Google Earth Engine catalogue (e.g.
“LC_Type5”, “precipitation”). For datasets and band names, see
<a href="https://developers.google.com/earth-engine/datasets" class="external-link">https://developers.google.com/earth-engine/datasets</a>.</p></li>
</ul></div>
    <div id="google-drive">
    <h2>Google Drive</h2>
    <p><code>extract_dynamic_raster()</code> also requires users to have installed the R package
<code>googledrive</code>(D'Agostino McGowan and Bryan, 2022) and initialised Google Drive with valid log-in
credentials, which must be stated using argument <code>user.email</code>. Please follow instructions on
<a href="https://googledrive.tidyverse.org/" class="external-link">https://googledrive.tidyverse.org/</a> for initialising the <code>googledrive</code> package.</p>
<p>The <code>save.drive.folder</code> must be uniquely named within your Google Drive and do not provide the
path.</p>
<p>Note: When running this function a folder labelled "dynamicSDM_download_bucket" will be created in
your Google Drive. This will be emptied once the function has finished running and output rasters
will be found in the save.drive.folder or save.directory specified.</p>
    </div>
    <div id="mathematical-function">
    <h2>Mathematical function</h2>
    <p><code>GEE.math.fun</code> specifies the mathematical function to be calculated over the temporal period
from each projection date. Options are limited to Google Earth Engine ImageCollection Reducer
functions (<a href="https://developers.google.com/earth-engine/apidocs/" class="external-link">https://developers.google.com/earth-engine/apidocs/</a>) for which an analogous R
function is available. This includes: "allNonZero","anyNonZero", "count",
"first","firstNonNull", "last", "lastNonNull", "max","mean", "median","min", "mode","product",
"sampleStdDev", "sampleVariance", "stdDev", "sum" and "variance".</p>
    </div>
    <div id="references">
    <h2>References</h2>
    <p>Aybar, C., Wu, Q., Bautista, L., Yali, R. and Barja, A., 2020. rgee: An R package for
interacting with Google Earth Engine. Journal of Open Source Software, 5(51), p.2272.</p>
<p>D'Agostino McGowan L., and Bryan J., 2022. googledrive: An Interface to Google Drive.
https://googledrive.tidyverse.org, https://github.com/tidyverse/googledrive.</p>
    </div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span> <span class="co"># googledrive::drive_has_token()</span></span></span>
<span class="r-in"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="fu"><a href="dynamic_proj_dates.html">dynamic_proj_dates</a></span><span class="op">(</span><span class="st">"2018-01-01"</span>, <span class="st">"2018-12-01"</span>, interval <span class="op">=</span> <span class="fl">3</span>,interval.level <span class="op">=</span> <span class="st">"month"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="co"># \dontshow{</span></span></span>
<span class="r-in"><span><span class="va">dates</span> <span class="op">&lt;-</span> <span class="va">dates</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span></span>
<span class="r-in"><span><span class="co"># }</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/utils/data.html" class="external-link">data</a></span><span class="op">(</span><span class="st">"sample_extent_data"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">user.email</span><span class="op">&lt;-</span><span class="fu"><a href="https://rdrr.io/r/base/character.html" class="external-link">as.character</a></span><span class="op">(</span><span class="fu">gargle</span><span class="fu">::</span><span class="fu"><a href="https://gargle.r-lib.org/reference/gargle_oauth_sitrep.html" class="external-link">gargle_oauth_sitrep</a></span><span class="op">(</span><span class="op">)</span><span class="op">$</span><span class="va">email</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">extract_dynamic_raster</span><span class="op">(</span>dates <span class="op">=</span> <span class="va">dates</span>,</span></span>
<span class="r-in"><span>                      datasetname <span class="op">=</span> <span class="st">"UCSB-CHG/CHIRPS/DAILY"</span>,</span></span>
<span class="r-in"><span>                      bandname<span class="op">=</span><span class="st">"precipitation"</span>,</span></span>
<span class="r-in"><span>                      user.email <span class="op">=</span> <span class="va">user.email</span>,</span></span>
<span class="r-in"><span>                      save.drive.folder <span class="op">=</span> <span class="st">"mydrivefolder"</span>,</span></span>
<span class="r-in"><span>                      spatial.res.metres <span class="op">=</span> <span class="fl">5566</span>,</span></span>
<span class="r-in"><span>                      GEE.math.fun <span class="op">=</span> <span class="st">"sum"</span>,</span></span>
<span class="r-in"><span>                      temporal.direction <span class="op">=</span> <span class="st">"prior"</span>,</span></span>
<span class="r-in"><span>                      temporal.res <span class="op">=</span> <span class="fl">56</span>,</span></span>
<span class="r-in"><span>                      spatial.ext <span class="op">=</span> <span class="va">sample_extent_data</span>,</span></span>
<span class="r-in"><span>                      varname <span class="op">=</span> <span class="st">"total_annual_precipitation_prior"</span>,</span></span>
<span class="r-in"><span>                      save.directory <span class="op">=</span> <span class="fu">temp.dir</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Rachel Dobson, Andy J. Challinor, Robert A. Cheke, Stewart Jennings, Stephen G. Willis, Martin Dallimer.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

      </footer></div>

  


  

  </body></html>

